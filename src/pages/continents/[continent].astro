---
import { POSITION_NAME_MAP } from "@constants/worldMapConstants";
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import MainLayout from "src/layouts/MainLayout.astro";
export async function getStaticPaths(){
    return Object.entries(POSITION_NAME_MAP).map(([key, {continentImg, abbr}])=>{
        return {
            params:{continent:abbr},
            props: {continentImg, continentName: key}
        }
    })
}
const {continentImg, continentName} = Astro.props;
const images = import.meta.glob<{default:ImageMetadata}>("/src/assets/images/continents/*.{jpeg,jpg,png,gif}")
const imgPath = `/src/assets/images/continents/${continentImg}.png`
if(!images[imgPath]) throw new Error(`${imgPath} does not exist :(`)
---
<MainLayout title={continentName}>
    <article class="main--body">
        <div class="secondary--block">
            <Image
                src={images[imgPath]()}
                alt="continent"
                class="main--img"
            />
        </div>
        <div class="secondary--block">
            <div class="header--bar">
                <span class="material-icons-outlined header--elem icon--control">arrow_back</span>
                <p class="secondary--title header--elem">{continentName}</p>
                <span class="material-icons-outlined header--elem">arrow_forward</span>
            </div>
        </div>
    </article>
</MainLayout>

<style>
    .main--body {
        display: flex;
        height: 100vh;
        flex-direction: row;
    }
    .main--img {
        max-width: 100%;
        height: auto;
    }
    .secondary--block {
        justify-content: center;
        align-items: center;
        display: flex;
        flex-grow: 0;
        width: 100%;
    }
    .secondary--title {
        font-family: "Segoe UI Regular";
        text-transform: capitalize;
        font-size: 3rem;
    }
    .header--bar {
        display: flex;
        flex-direction: row;
    }
    .header--elem {
        padding: 0;
        margin: 0;

    }
    .icon--control {
        vertical-align: sub;
    }
    @media screen and (max-width:1000px){
        .main--body{
            flex-direction: column;
        }
        .secondary--title {
            font-size: 2rem;
        }
    }
</style>